keymap_gen = find_program('keycodemapdb/tools/keymap-gen')

keymaps = [
  ['atset1', 'qcode'],
  ['linux', 'qcode'],
  ['qcode', 'atset1'],
  ['qcode', 'atset2'],
  ['qcode', 'atset3'],
  ['qcode', 'linux'],
  ['qcode', 'qnum'],
  ['qcode', 'sun'],
  ['qnum', 'qcode'],
  ['usb', 'qcode'],
  ['win32', 'qcode'],
  ['x11', 'qcode'],
  ['xorgevdev', 'qcode'],
  ['xorgkbd', 'qcode'],
  ['xorgxquartz', 'qcode'],
  ['xorgxwin', 'qcode'],
  ['osx', 'qcode'],
]

foreach e : keymaps
  output = 'input-keymap-@0@-to-@1@.c'.format(e[0], e[1])
  custom_target(output,
                output: output,
                capture: true,
                build_by_default: true, # to be removed when added to a target
                input: files('keycodemapdb/data/keymaps.csv'),
                command: [keymap_gen,
                          '--lang', 'glib2',
                          '--varname', 'qemu_input_map_@0@_to_@1@'.format(e[0], e[1]),
                          'code-map', '@INPUT0@', e[0], e[1]])
endforeach

subdir('shader')
